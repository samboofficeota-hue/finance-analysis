# EDINET DB 財務分析ツール 📊

上場企業の財務情報を簡単に取得・分析できるPythonコマンドラインツールです。

## 特徴 ✨

- 🔍 **企業検索**: 企業名で上場企業を検索
- 📈 **財務分析**: 損益計算書、貸借対照表、財務指標を表示
- 🏆 **ランキング表示**: ROE、ROA、売上高などのランキング
- ⚖️ **企業比較**: 複数企業の財務データを横並びで比較
- 💾 **CSVエクスポート**: 分析結果をCSVファイルで出力

## 必要な環境

- Python 3.7以上
- requests ライブラリ

## インストール

```bash
# requestsライブラリをインストール
pip install requests

# スクリプトを実行可能にする（Linuxの場合）
chmod +x edinet_analyzer.py
```

## 使い方

### 1. 企業を検索する

企業名で検索して、EDINETコードや証券コードを取得できます。

```bash
# 「任天堂」を検索
python3 edinet_analyzer.py search "任天堂"

# 検索結果を表示（最初の10件）
python3 edinet_analyzer.py search

# 表示件数を指定
python3 edinet_analyzer.py search "トヨタ" --per-page 20

# 検索結果をCSVで保存
python3 edinet_analyzer.py search "自動車" --export search_results.csv
```

**出力例:**
```
================================================================================
企業一覧
================================================================================

1. 任天堂株式会社
   EDINETコード: E02367
   証券コード: 7974

2. トヨタ自動車株式会社
   EDINETコード: E01825
   証券コード: 7203
```

### 2. 企業の基本情報を表示

企業の詳細情報（業種、所在地、設立年月日など）を取得します。

```bash
# 任天堂の基本情報を表示
python3 edinet_analyzer.py info E02367
```

**出力例:**
```
================================================================================
企業情報: 任天堂株式会社
================================================================================

EDINETコード: E02367
証券コード: 7974
業種: その他製品
所在地: 京都府京都市南区上鳥羽鉾立町11番地1
設立年月日: 1947-11-20
```

### 3. 財務データを取得・分析

企業の財務諸表と主要な財務指標を表示します。

```bash
# 任天堂の財務データを表示
python3 edinet_analyzer.py financials E02367
```

**出力例:**
```
================================================================================
財務情報: 任天堂株式会社
================================================================================

決算期: 2024年3月期
決算日: 2024-03-31

【損益計算書】
  売上高: 1.67兆 円
  営業利益: 5,289.61億 円
  経常利益: 5,562.21億 円
  当期純利益: 3,704.66億 円

【貸借対照表】
  総資産: 3.12兆 円
  純資産: 2.58兆 円
  自己資本: 2.58兆 円

【財務指標】
  ROE (自己資本利益率): 14.85 %
  ROA (総資産利益率): 12.35 %
  自己資本比率: 82.65 %
  営業利益率: 31.68 %
```

### 4. ランキングを表示

各種財務指標でランキングを表示します。

```bash
# ROEランキングTOP10
python3 edinet_analyzer.py ranking roe --limit 10

# ROAランキングTOP20
python3 edinet_analyzer.py ranking roa --limit 20

# 売上高ランキング
python3 edinet_analyzer.py ranking sales --limit 15

# 時価総額ランキング
python3 edinet_analyzer.py ranking market_cap --limit 10

# 営業利益ランキング
python3 edinet_analyzer.py ranking operating_income --limit 10

# ランキングをCSVで保存
python3 edinet_analyzer.py ranking roe --limit 30 --export roe_ranking.csv
```

**出力例:**
```
================================================================================
ROE (自己資本利益率) ランキング
================================================================================
 1. ○○商事株式会社                  25.48 % (E12345)
 2. △△システム                      23.67 % (E23456)
 3. 任天堂株式会社                  14.85 % (E02367)
...
```

### 5. 複数企業を比較

複数企業の財務データを横並びで比較できます。

```bash
# 任天堂、ソニーグループ、トヨタ自動車を比較
python3 edinet_analyzer.py compare E02367 E01825 E02503
```

**出力例:**
```
====================================================================================================
企業比較
====================================================================================================

項目                        任天堂株式会社       ソニーグループ       トヨタ自動車株式会社
----------------------------------------------------------------------------------------------------
売上高                           1.67兆              13.21兆               37.15兆
営業利益                        5,289.61億            1.21兆               4.94兆
当期純利益                      3,704.66億            9,702.55億            3.94兆
総資産                           3.12兆              28.63兆               73.52兆
純資産                           2.58兆              10.51兆               33.72兆
ROE                              14.85                10.23                 12.45
ROA                              12.35                 3.56                  5.67
自己資本比率                     82.65                32.45                 42.18
```

## 利用可能な指標

- **roe**: 自己資本利益率（ROE）
- **roa**: 総資産利益率（ROA）
- **sales**: 売上高
- **market_cap**: 時価総額
- **operating_income**: 営業利益

## APIキーについて

デフォルトでは、スクリプトにAPIキーがハードコードされています。

独自のAPIキーを使用する場合：

```bash
python3 edinet_analyzer.py --api-key YOUR_API_KEY search "任天堂"
```

または、スクリプト内の `DEFAULT_API_KEY` を変更してください。

## よくある企業のEDINETコード

| 企業名 | EDINETコード | 証券コード |
|--------|--------------|------------|
| 任天堂 | E02367 | 7974 |
| トヨタ自動車 | E01825 | 7203 |
| ソニーグループ | E02503 | 6758 |
| ソフトバンクグループ | E04425 | 9984 |
| キーエンス | E01967 | 6861 |
| ファーストリテイリング | E03516 | 9983 |

※EDINETコードは、企業検索機能で簡単に調べられます。

## トラブルシューティング

### エラー: ModuleNotFoundError: No module named 'requests'

```bash
pip install requests
```

### エラー: APIリクエストエラー

- インターネット接続を確認してください
- APIキーが正しいか確認してください
- API利用制限に達していないか確認してください

## 活用例

### 1. 業界分析

```bash
# 自動車業界の主要企業を比較
python3 edinet_analyzer.py search "自動車"
python3 edinet_analyzer.py compare E01825 E02144 E02213
```

### 2. 高ROE企業を探す

```bash
# ROEランキングを取得してCSV保存
python3 edinet_analyzer.py ranking roe --limit 50 --export high_roe.csv

# Excelなどで開いて分析
```

### 3. 定期的なモニタリング

```bash
# 監視したい企業の財務データを定期的に確認
python3 edinet_analyzer.py financials E02367 > nintendo_$(date +%Y%m%d).txt
```

### 4. 投資候補の比較

```bash
# 気になる企業を比較
python3 edinet_analyzer.py compare E02367 E01967 E03516
```

## ライセンス

このツールはMITライセンスの下で公開されています。

## 注意事項

- このツールはEDINET DB APIを使用しています
- API利用規約を遵守してください
- 財務データは参考情報として扱い、投資判断は自己責任で行ってください
- データの正確性については保証できません。公式な決算資料も必ず確認してください

## お問い合わせ・フィードバック

バグ報告や機能要望があれば、お気軽にご連絡ください。

---

**Happy Analyzing! 📊📈**
